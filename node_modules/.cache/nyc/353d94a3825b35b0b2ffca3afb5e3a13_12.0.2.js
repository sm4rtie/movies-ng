var cov_bfj41am8e=function(){var path="/home/marta/moviesApp/routes/movies.js",hash="b4df0a503dbf5189d9d744aaedd7a46da8b8aa25",Function=function(){}.constructor,global=new Function('return this')(),gcv="__coverage__",coverageData={path:"/home/marta/moviesApp/routes/movies.js",statementMap:{"0":{start:{line:1,column:14},end:{line:1,column:32}},"1":{start:{line:2,column:13},end:{line:2,column:29}},"2":{start:{line:3,column:14},end:{line:3,column:32}},"3":{start:{line:4,column:15},end:{line:4,column:34}},"4":{start:{line:5,column:12},end:{line:5,column:38}},"5":{start:{line:8,column:0},end:{line:46,column:3}},"6":{start:{line:15,column:0},end:{line:15,column:22}},"7":{start:{line:16,column:19},end:{line:16,column:33}},"8":{start:{line:17,column:2},end:{line:17,column:26}},"9":{start:{line:18,column:2},end:{line:45,column:1}},"10":{start:{line:19,column:4},end:{line:19,column:20}},"11":{start:{line:20,column:4},end:{line:20,column:40}},"12":{start:{line:23,column:2},end:{line:44,column:3}},"13":{start:{line:30,column:28},end:{line:30,column:44}},"14":{start:{line:31,column:30},end:{line:41,column:10}},"15":{start:{line:32,column:14},end:{line:38,column:11}},"16":{start:{line:33,column:12},end:{line:37,column:13}},"17":{start:{line:34,column:26},end:{line:34,column:60}},"18":{start:{line:36,column:14},end:{line:36,column:47}},"19":{start:{line:36,column:23},end:{line:36,column:47}},"20":{start:{line:40,column:12},end:{line:40,column:39}},"21":{start:{line:48,column:0},end:{line:77,column:3}},"22":{start:{line:49,column:12},end:{line:49,column:34}},"23":{start:{line:50,column:12},end:{line:50,column:36}},"24":{start:{line:51,column:14},end:{line:51,column:23}},"25":{start:{line:70,column:6},end:{line:74,column:3}},"26":{start:{line:72,column:3},end:{line:72,column:20}},"27":{start:{line:79,column:0},end:{line:79,column:24}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:8,column:24},end:{line:8,column:25}},loc:{start:{line:8,column:49},end:{line:46,column:1}},line:8},"1":{name:"(anonymous_1)",decl:{start:{line:29,column:8},end:{line:29,column:9}},loc:{start:{line:29,column:43},end:{line:44,column:1}},line:29},"2":{name:"(anonymous_2)",decl:{start:{line:31,column:77},end:{line:31,column:78}},loc:{start:{line:31,column:95},end:{line:41,column:9}},line:31},"3":{name:"(anonymous_3)",decl:{start:{line:48,column:22},end:{line:48,column:23}},loc:{start:{line:48,column:47},end:{line:77,column:1}},line:48},"4":{name:"(anonymous_4)",decl:{start:{line:70,column:29},end:{line:70,column:30}},loc:{start:{line:70,column:47},end:{line:74,column:1}},line:70}},branchMap:{"0":{loc:{start:{line:18,column:2},end:{line:45,column:1}},type:"if",locations:[{start:{line:18,column:2},end:{line:45,column:1}},{start:{line:18,column:2},end:{line:45,column:1}}],line:18},"1":{loc:{start:{line:32,column:14},end:{line:38,column:11}},type:"if",locations:[{start:{line:32,column:14},end:{line:38,column:11}},{start:{line:32,column:14},end:{line:38,column:11}}],line:32},"2":{loc:{start:{line:36,column:14},end:{line:36,column:47}},type:"if",locations:[{start:{line:36,column:14},end:{line:36,column:47}},{start:{line:36,column:14},end:{line:36,column:47}}],line:36}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0},b:{"0":[0,0],"1":[0,0],"2":[0,0]},_coverageSchema:"d34fc3e6b8297bcde183f5492bcb8fcb36775295"},coverage=global[gcv]||(global[gcv]={});if(coverage[path]&&coverage[path].hash===hash){return coverage[path];}coverageData.hash=hash;return coverage[path]=coverageData;}();var express=(cov_bfj41am8e.s[0]++,require('express'));var router=(cov_bfj41am8e.s[1]++,express.Router());var request=(cov_bfj41am8e.s[2]++,require('request'));var mongoose=(cov_bfj41am8e.s[3]++,require('mongoose'));var Movie=(cov_bfj41am8e.s[4]++,require('../models/Movie'));/* GET users listing. */cov_bfj41am8e.s[5]++;router.post('/movies',function(req,res,next){cov_bfj41am8e.f[0]++;cov_bfj41am8e.s[6]++;/*  request({
    uri: 'http://www.omdbapi.com/?apikey=b5ba880d&',
    qs: {
          t: req.params.title
        }
  }).pipe(res);*/console.log(req.body);var movieTitle=(cov_bfj41am8e.s[7]++,req.body.title);cov_bfj41am8e.s[8]++;console.log(movieTitle);cov_bfj41am8e.s[9]++;if(!movieTitle){cov_bfj41am8e.b[0][0]++;cov_bfj41am8e.s[10]++;res.status(400);cov_bfj41am8e.s[11]++;res.send('Please pass movie title');}else{cov_bfj41am8e.b[0][1]++;cov_bfj41am8e.s[12]++;request.get({url:'http://www.omdbapi.com/?apikey=b5ba880d&',qs:{t:movieTitle}},function(err,httpResponse,body){cov_bfj41am8e.f[1]++;var moviejson=(cov_bfj41am8e.s[13]++,JSON.parse(body));var findByTitle=(cov_bfj41am8e.s[14]++,Movie.findOne({'Title':moviejson.Title}).then(function(movies){cov_bfj41am8e.f[2]++;cov_bfj41am8e.s[15]++;if(!movies){cov_bfj41am8e.b[1][0]++;cov_bfj41am8e.s[16]++;try{var movie=(cov_bfj41am8e.s[17]++,Movie.collection.insert(moviejson));}catch(err){cov_bfj41am8e.s[18]++;if(err){cov_bfj41am8e.b[2][0]++;cov_bfj41am8e.s[19]++;return handleError(err);}else{cov_bfj41am8e.b[2][1]++;}}}else{cov_bfj41am8e.b[1][1]++;}cov_bfj41am8e.s[20]++;res.send(JSON.parse(body));}));//console.log(res);
});}});cov_bfj41am8e.s[21]++;router.get('/movies',function(req,res,next){cov_bfj41am8e.f[3]++;var arr=(cov_bfj41am8e.s[22]++,Object.keys(req.query));var val=(cov_bfj41am8e.s[23]++,Object.values(req.query));var query=(cov_bfj41am8e.s[24]++,req.query);var qs;var myobj;//console.log(query);
/*  for(var key in query) {
    if(query.hasOwnProperty(key)) {
        //query[key] = { $regex: '.*\' + \'' + query[key] + \' + \'.*\''};
        mystring = "{ $regex: '.*' + \'" + query[key] + "\' + '.*' }";
        //query[key] = mystring.replace(/\/"/g,'');
        //console.log(mystring);
        qs = key + ': ' + mystring;
         myobj = JSON.parse(JSON.stringify(qs));
console.log(myobj);
        //console.log(qs);
    }
}*/ //console.log(query);
//Movie.find({ Genre: { $regex: '.*' + 'Action' + '.*' }}).then(function (movies) {
cov_bfj41am8e.s[25]++;Movie.find(query).then(function(movies){cov_bfj41am8e.f[4]++;cov_bfj41am8e.s[26]++;res.send(movies);});});cov_bfj41am8e.s[27]++;module.exports=router;